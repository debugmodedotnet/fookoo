<section class="my-5 pt-4">
  <div class="container-boxed pt-4">
    <h2 class="section-title left font-30 nmc-dark-grey font-family-poppins pb-3">
      Job Listings
    </h2>

    <div *ngIf="loading">Loading job details...</div>

    <table class="table table-bordered table-striped" *ngIf="!loading && jobs.length > 0 && !editMode">
      <thead>
        <tr>
          <th>Company Name</th>
          <th>Position</th>
          <th>Location</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let job of jobs">
          <td>{{ job.CompanyName }}</td>
          <td>{{ job.Position }}</td>
          <td>{{ job.Location }}</td>
          <td>
            <button class="btn btn-class btn-sm ms-2" (click)="editJob(job)">Edit</button>
            <button class="btn btn-danger btn-sm ms-2" (click)="deleteJob(job.id)">Delete</button>
          </td>
        </tr>
      </tbody>
    </table>

    <div *ngIf="!loading && jobs.length === 0">
      No jobs available.
    </div>

    <div *ngIf="editMode">
      <h3 class="text-orange">Edit Job</h3>
      <form [formGroup]="jobForm" (ngSubmit)="updateJob()">
        <!-- Company Details -->
        <div class="row mb-3">
          <div class="col-md-6">
            <label for="CompanyName" class="form-label required">Company Name</label>
            <input
              id="CompanyName"
              formControlName="CompanyName"
              type="text"
              class="form-control"
              placeholder="Enter company name"
            />
            <div *ngIf="jobForm.get('CompanyName')?.invalid && (jobForm.get('CompanyName')?.touched || jobForm.dirty)" class="text-danger">
              Company Name is required.
            </div>
          </div>
          <div class="col-md-6">
            <label for="CompanyUrl" class="form-label required">Company URL</label>
            <input
              id="CompanyUrl"
              formControlName="CompanyUrl"
              type="url"
              class="form-control"
              placeholder="Enter company URL"
            />
            <div *ngIf="jobForm.get('CompanyUrl')?.invalid && (jobForm.get('CompanyUrl')?.touched || jobForm.dirty)" class="text-danger">
              Please enter a valid URL.
            </div>
          </div>
        </div>

        <!-- Job Description -->
        <div class="row mb-3">
          <div class="col-md-12">
            <label for="JobDescription" class="form-label required">Job Description</label>
            <textarea
              id="JobDescription"
              formControlName="JobDescription"
              rows="4"
              class="form-control"
              placeholder="Enter job description"
            ></textarea>
            <div *ngIf="jobForm.get('JobDescription')?.invalid && (jobForm.get('JobDescription')?.touched || jobForm.dirty)" class="text-danger">
              Job Description is required.
            </div>
          </div>
        </div>

        <!-- Responsibilities -->
        <div class="row mb-3">
          <div class="col-md-12">
            <label for="Responsibilities" class="form-label required">Responsibilities</label>
            <div formArrayName="Responsibilities">
              <div class="d-flex flex-wrap align-items-center">
                <ng-container *ngFor="let control of responsibilities.controls; let i = index">
                  <div class="chip-container me-2 mb-2">
                    <div class="chip">
                      {{ control.value }}
                      <button type="button" (click)="removeResponsibility(i)" class="btn btn-danger btn-sm ms-2">×</button>
                    </div>
                  </div>
                </ng-container>
                <input #newResponsibility type="text" class="form-control me-2" placeholder="Add responsibility" />
                <button type="button" (click)="addResponsibility(newResponsibility.value); newResponsibility.value = '';" class="btn btn-class btn-sm">+</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Qualification -->
        <div class="row mb-3">
          <div class="col-md-12">
            <label for="Qualification" class="form-label required">Qualification</label>
            <div formArrayName="Qualification">
              <div class="d-flex flex-wrap align-items-center">
                <ng-container *ngFor="let control of qualifications.controls; let i = index">
                  <div class="chip-container me-2 mb-2">
                    <div class="chip">
                      {{ control.value }}
                      <button type="button" (click)="removeQualification(i)" class="btn btn-danger btn-sm ms-2">×</button>
                    </div>
                  </div>
                </ng-container>
                <input #newQualification type="text" class="form-control me-2" placeholder="Add qualification" />
                <button type="button" (click)="addQualification(newQualification.value); newQualification.value = '';" class="btn btn-class btn-sm">+</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Skills Required -->
        <div class="row mb-3">
          <div class="col-md-12">
            <label for="SkillsRequired" class="form-label required">Skills Required</label>
            <input
              id="SkillsRequired"
              formControlName="SkillsRequired"
              type="text"
              class="form-control"
              placeholder="Enter skills required"
            />
          </div>
        </div>

        <!-- Location and Remote -->
        <div class="row mb-3">
          <div class="col-md-6">
            <label for="Location" class="form-label required">Location</label>
            <input
              id="Location"
              formControlName="Location"
              type="text"
              class="form-control"
              placeholder="Enter job location"
            />
          </div>
          <div class="col-md-6">
            <label for="Remote" class="form-label">Remote</label>
            <input
              id="Remote"
              formControlName="Remote"
              type="checkbox"
              class="form-check-input"
            />
          </div>
        </div>

        <!-- Position and Tag -->
        <div class="row mb-3">
          <div class="col-md-6">
            <label for="Position" class="form-label required">Position</label>
            <select id="Position" formControlName="Position" class="form-select">
              <option *ngFor="let position of positions" [value]="position">{{ position }}</option>
            </select>
          </div>
          <div class="col-md-6">
            <label for="Tag" class="form-label">Tag</label>
            <select id="Tag" formControlName="Tag" class="form-select">
              <option *ngFor="let tag of tags" [value]="tag">{{ tag }}</option>
            </select>
          </div>
        </div>

        <!-- Contact Information -->
        <div class="row mb-3">
          <div class="col-md-6">
            <label for="Email" class="form-label">Email</label>
            <input
              id="Email"
              formControlName="Email"
              type="email"
              class="form-control"
              placeholder="Enter email address"
            />
          </div>
          <div class="col-md-6">
            <label for="PhoneNo" class="form-label">Phone Number</label>
            <input
              id="PhoneNo"
              formControlName="PhoneNo"
              type="text"
              class="form-control"
              placeholder="Enter phone number"
            />
          </div>
        </div>

        <!-- Image URL -->
        <div class="row mb-3">
          <div class="col-md-6">
            <label for="ImageUrl" class="form-label required">Image URL</label>
            <input
              id="ImageUrl"
              formControlName="ImageUrl"
              type="url"
              class="form-control"
              placeholder="Enter image URL"
            />
          </div>
        </div>

        <!-- Update and Cancel Buttons -->
        <div class="row mb-3">
          <div class="col-md-6">
            <button type="submit" class="btn btn-orange">Update</button>
          </div>
          <div class="col-md-6">
            <button type="button" (click)="cancelEdit()" class="btn btn-red">Cancel</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</section>


<!--<section class="my-5 pt-4">
  <div class="container-boxed pt-4">
    <h2 class="section-title left font-30 nmc-dark-grey font-family-poppins pb-3">
      Job Listings
    </h2>

    <div *ngIf="loading">Loading job details...</div>

    <table class="table table-bordered table-striped" *ngIf="!loading && !editMode">
      <thead>
        <tr>
          <th>Company Name</th>
          <th>Position</th>
          <th>Location</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let job of jobs">
          <td>{{ job.CompanyName }}</td>
          <td>{{ job.Position }}</td>
          <td>{{ job.Location }}</td>
          <td>
            <button class="btn btn-class btn-sm ms-2" (click)="editJob(job)">Edit</button>
            <button class="btn btn-danger btn-sm ms-2" (click)="deleteJob(job.id)">Delete</button>
          </td>
        </tr>
      </tbody>
    </table>

    <div *ngIf="editMode">
      <h3 class="text-orange">Edit Job</h3>
      <form [formGroup]="jobForm" (ngSubmit)="updateJob()">
        
        <div class="row mb-3">
          <div class="col-md-6">
            <label for="CompanyName" class="form-label required">Company Name</label>
            <input
              id="CompanyName"
              formControlName="CompanyName"
              type="text"
              class="form-control"
              placeholder="Enter company name"
            />
            <div *ngIf="jobForm.get('CompanyName')?.invalid && (jobForm.get('CompanyName')?.touched || jobForm.dirty)" class="text-danger">
              Company Name is required.
            </div>
          </div>
          <div class="col-md-6">
            <label for="CompanyUrl" class="form-label required">Company URL</label>
            <input
              id="CompanyUrl"
              formControlName="CompanyUrl"
              type="url"
              class="form-control"
              placeholder="Enter company URL"
            />
            <div *ngIf="jobForm.get('CompanyUrl')?.invalid && (jobForm.get('CompanyUrl')?.touched || jobForm.dirty)" class="text-danger">
              Please enter a valid URL.
            </div>
          </div>
        </div>

       
        <div class="row mb-3">
          <div class="col-md-12">
            <label for="JobDescription" class="form-label required">Job Description</label>
            <textarea
              id="JobDescription"
              formControlName="JobDescription"
              rows="4"
              class="form-control"
              placeholder="Enter job description"
            ></textarea>
            <div *ngIf="jobForm.get('JobDescription')?.invalid && (jobForm.get('JobDescription')?.touched || jobForm.dirty)" class="text-danger">
              Job Description is required.
            </div>
          </div>
        </div>

       
        <div class="row mb-3">
          <div class="col-md-12">
            <label for="Responsibilities" class="form-label required">Responsibilities</label>
            <div formArrayName="Responsibilities">
              <div class="d-flex flex-wrap align-items-center">
                <ng-container *ngFor="let control of responsibilities.controls; let i = index">
                  <div class="chip-container me-2 mb-2">
                    <div class="chip">
                      {{ control.value }}
                      <button type="button" (click)="removeResponsibility(i)" class="btn btn-danger btn-sm ms-2">×</button>
                    </div>
                  </div>
                </ng-container>
                <input #newResponsibility type="text" class="form-control me-2" placeholder="Add responsibility" />
                <button type="button" (click)="addResponsibility(newResponsibility.value); newResponsibility.value = '';" class="btn btn-class btn-sm">+</button>
              </div>
            </div>
          </div>
        </div>

       
        <div class="row mb-3">
          <div class="col-md-12">
            <label for="Qualification" class="form-label required">Qualification</label>
            <div formArrayName="Qualification">
              <div class="d-flex flex-wrap align-items-center">
                <ng-container *ngFor="let control of qualifications.controls; let i = index">
                  <div class="chip-container me-2 mb-2">
                    <div class="chip">
                      {{ control.value }}
                      <button type="button" (click)="removeQualification(i)" class="btn btn-danger btn-sm ms-2">×</button>
                    </div>
                  </div>
                </ng-container>
                <input #newQualification type="text" class="form-control me-2" placeholder="Add qualification" />
                <button type="button" (click)="addQualification(newQualification.value); newQualification.value = '';" class="btn btn-class btn-sm">+</button>
              </div>
            </div>
          </div>
        </div>

        
        <div class="row mb-3">
          <div class="col-md-12">
            <label for="SkillsRequired" class="form-label required">Skills Required</label>
            <input
              id="SkillsRequired"
              formControlName="SkillsRequired"
              type="text"
              class="form-control"
              placeholder="Enter skills required"
            />
          </div>
        </div>

        
        <div class="row mb-3">
          <div class="col-md-6">
            <label for="Location" class="form-label required">Location</label>
            <input
              id="Location"
              formControlName="Location"
              type="text"
              class="form-control"
              placeholder="Enter job location"
            />
          </div>
          <div class="col-md-6">
            <label for="Remote" class="form-label">Remote</label>
            <input
              id="Remote"
              formControlName="Remote"
              type="checkbox"
              class="form-check-input"
            />
          </div>
        </div>

        
        <div class="row mb-3">
          <div class="col-md-6">
            <label for="Position" class="form-label required">Position</label>
            <select id="Position" formControlName="Position" class="form-select">
              <option *ngFor="let position of positions" [value]="position">{{ position }}</option>
            </select>
          </div>
          <div class="col-md-6">
            <label for="Tag" class="form-label">Tag</label>
            <select id="Tag" formControlName="Tag" class="form-select">
              <option *ngFor="let tag of tags" [value]="tag">{{ tag }}</option>
            </select>
          </div>
        </div>

        
        <div class="row mb-3">
          <div class="col-md-6">
            <label for="Email" class="form-label">Email</label>
            <input
              id="Email"
              formControlName="Email"
              type="email"
              class="form-control"
              placeholder="Enter email address"
            />
          </div>
          <div class="col-md-6">
            <label for="PhoneNo" class="form-label">Phone Number</label>
            <input
              id="PhoneNo"
              formControlName="PhoneNo"
              type="text"
              class="form-control"
              placeholder="Enter phone number"
            />
          </div>
        </div>

       
        <div class="row mb-3">
          <div class="col-md-6">
            <label for="ImageUrl" class="form-label required">Image URL</label>
            <input
              id="ImageUrl"
              formControlName="ImageUrl"
              type="url"
              class="form-control"
              placeholder="Enter image URL"
            />
          </div>
        </div>

        
        <div class="row mb-3">
          <div class="col-md-6">
            <button type="submit" class="btn btn-orange">Update</button>
          </div>
          <div class="col-md-6">
            <button type="button" (click)="cancelEdit()" class="btn btn-red">Cancel</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</section>
-->
