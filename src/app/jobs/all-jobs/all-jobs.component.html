<div class="jobs-container d-flex justify-content-between">
  <div class="job-list nmc-bg-white">
    <div class="cards-container">
      @for( tag of tags; track tag ){
      <div
        (keydown)="onTagFilterChange(tag)"
        (click)="onTagFilterChange(tag)"
        tabindex="0"
        [class.active]="isTagActive(tag)"
        class="card p-4 m-3 cursor-pointer"
      >
        {{ tag }}
      </div>
      }
    </div>
  </div>

  <div class="job-detail">
    <div class="job-detail-content px-4 pb-4">
      <ng-container *ngIf="displayedJobs.length > 0; else noJobs">
        @for(job of displayedJobs; track job){
        <div class="wrapper rounded-4 nmc-bg-white mt-4 pb-4">
          <div class="company-info p-4 border-bottom position-relative">
            <div class="company-img position-absolute">
              <a [href]="job.CompanyUrl"
                ><img
                  [src]="job.ImageUrl ? job.ImageUrl : defaultImage"
                  alt="{{ job.position }}"
                  class="h-100 w-100 object-fit-contain"
              /></a>
            </div>

            <h2 class="font-32 nmc-dark-grey fw-normal">
              {{ job.position }}
            </h2>

            <div
              class="pb-4 pt-3 d-flex align-items-center justify-content-start gap-4"
            >
              <h6 class="nmc-medium-grey fw-light font-16 m-0">
                <i class="bi bi-buildings me-2 font-20"></i
                >{{ job.companyName }}
              </h6>

              <h6 class="nmc-medium-grey fw-light font-16 m-0">
                <i class="bi bi-geo-alt me-2 font-20"></i
                >{{ job.Location }}@if(job.Remote){ (Remote)}
              </h6>

              @if(job.Email){
              <h6 class="nmc-medium-grey fw-light font-16 m-0">
                <i class="bi bi-envelope me-2 font-20"></i>{{ job.Email }}
              </h6>
              } @if(job.PhoneNo){
              <h6 class="nmc-medium-grey fw-light font-16 m-0">
                <i class="bi bi-telephone me-2 font-20"></i>{{ job.PhoneNo }}
              </h6>
              }
            </div>
          </div>

          <div class="qualifications p-4">
            <h5 class="nmc-dark-grey fw-semibold font-18">Qualifications:</h5>
            <ul class="mt-3">
              @for(qualification of job.qualification; track qualification){
              <li class="ms-4 nmc-medium-grey">{{ qualification }}</li>
              }
            </ul>
          </div>

          <button
            class="nmc-btn-primary h-auto py-2 px-4 rounded-2 box-shadow-none ms-4 nmc-bg-white nmc-primary"
            [routerLink]="[job.id]"
          >
            Learn More
          </button>
        </div>

        }

        <div class="button-container">
          <button
            *ngIf="
              selectedTag === 'All jobs' &&
              displayedJobs.length % itemsPerPage === 0
            "
            (click)="loadMore()"
            class="btn-load-more"
          >
            Load More <i class="bi bi-arrow-down"></i>
          </button>
          <button
            *ngIf="currentPage > 0 && selectedTag === 'All jobs'"
            (click)="showLess()"
            class="btn-show-less"
          >
            Show Less <i class="bi bi-arrow-up"></i>
          </button>
        </div>
      </ng-container>

      <ng-template #noJobs>
        <div class="no-jobs-message">
          <h4>No jobs available for selected tag</h4>
        </div>
      </ng-template>
    </div>
  </div>
</div>
